<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Lympid-core by lympid</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Lympid-core</h1>
          <h2></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/lympid/lympid-core/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/lympid/lympid-core/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/lympid/lympid-core" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h1>

<p>This project is a Java implementation of the <strong>UML state machine</strong> specification as
described in <a href="http://fabienrenaud.github.io/lympid/lympid-core/docs/UML%20superstructure%202.4.1.pdf">UML superstructure 2.4.1</a>.
It is implemented with <strong>Java 8</strong> and packaged as a valid <strong>OSGi bundle</strong>.</p>

<p>The implementation supports nearly every single feature of behavioral state machines:</p>

<ul>
<li>states: simple, composite, orthogonal and submachine</li>
<li>pseudo states: initial, entry point, exit point, junction, choice, join, fork, shallow history, deep history and terminate</li>
<li>transitions: external, internal and local</li>
<li>transition events, transition guards, transition effects, the two latter have easy and typed access to the event and context data</li>
<li>state entry and state exit behaviors, with easy and typed access to context data</li>
<li>asynchronous state activity behaviors, with easy and typed access to context data</li>
<li>completion events (transition with no triggers/events)</li>
<li>time events</li>
<li>custom events</li>
</ul>

<p>and comes with an easy-to-use builder API that takes away from the developer the inherent complexity of UML state machines.</p>

<p>Other features include, but not only:</p>

<ul>
<li>build once, use many times: <code>StateMachine</code> instances do not contain any execution data and are not changed throughout the execution of a state machine. Therefore, they can be reused as many times as necessary.</li>
<li>various state machine executors: synchronous/synchronized executor, lock executor, queued executor, sharded executor</li>
<li>state machine listeners: to listen to everything that happens in the state machine</li>
<li>prioritized transitions: when more than one transition is enabled for a (pseudo) state, only one will be fired. You can define which it will be.</li>
<li>configurable state machine executor: auto start, thread pool for asynchronous events and activities, ...</li>
</ul>

<p>It is heavily <strong>tested with more than 120 state machines and more than 700 unit tests</strong>. Code and branch coverage is above 90%.</p>

<p>This project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></p>

<p><a href="https://travis-ci.org/lympid/lympid-core"><img src="https://travis-ci.org/lympid/lympid-core.svg?branch=master" alt="Build Status"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.lympid/lympid-core"><img src="https://maven-badges.herokuapp.com/maven-central/com.lympid/lympid-core/badge.svg" alt="Maven Central"></a></p>

<h1>
<a id="get-it" class="anchor" href="#get-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get it!</h1>

<h2>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maven</h2>

<p>Functionality of this project is contained in the Java package <code>com.lympid.core</code>.</p>

<p>Add the following dependency to your <code>pom</code> to use this package:</p>

<div class="highlight highlight-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.lympid&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;lympid-core&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.9.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<h2>
<a id="non-maven" class="anchor" href="#non-maven" aria-hidden="true"><span class="octicon octicon-link"></span></a>Non-Maven</h2>

<p>Jars are also available for direct download on <a href="http://repo1.maven.org/maven2/com/lympid/lympid-core/">maven central repository</a>.</p>

<h1>
<a id="use-it" class="anchor" href="#use-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use it!</h1>

<p>UML state machine is not an easy topic for the non-initiated.</p>

<h2>
<a id="tutorial-1-a-simple-state-machine" class="anchor" href="#tutorial-1-a-simple-state-machine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tutorial 1: A simple state machine</h2>

<p>Let's implement the following state machine which describe an on/off switch:</p>

<p><img src="http://fabienrenaud.github.io/lympid/lympid-core/docs/Tutorial1/diagram.png" alt="tutorial1"></p>

<p>First, create your state machine builder:</p>

<div class="highlight highlight-java"><pre><span class="pl-stj">StateMachineBuilder</span> builder <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">StateMachineBuilder</span>(<span class="pl-s1"><span class="pl-pds">"</span>OnOff<span class="pl-pds">"</span></span>);</pre></div>

<p>And build the initial vertex with all its outgoing transitions:</p>

<div class="highlight highlight-java"><pre>builder                  <span class="pl-c">// the state machine builder</span>
  .region()              <span class="pl-c">// a (pseudo) state always belong to a region!</span>
    .initial()           <span class="pl-c">// adds an initial pseudo state in this region</span>
      .transition(<span class="pl-s1"><span class="pl-pds">"</span>t0<span class="pl-pds">"</span></span>)  <span class="pl-c">// adds a transition named "t0" to the initial pseudo state</span>
        .target(<span class="pl-s1"><span class="pl-pds">"</span>off<span class="pl-pds">"</span></span>);  <span class="pl-c">// defines the target of the initial transition</span></pre></div>

<p>Now, repeat the operation for the next (pseudo) state. Let's do the "off" state:</p>

<div class="highlight highlight-java"><pre>builder
  .region()              <span class="pl-c">// this is the same region as before, same instance.</span>
    .state(<span class="pl-s1"><span class="pl-pds">"</span>off<span class="pl-pds">"</span></span>)        <span class="pl-c">// creates a simple state named "off"</span>
      .transition(<span class="pl-s1"><span class="pl-pds">"</span>t1<span class="pl-pds">"</span></span>)  <span class="pl-c">// adds an external transition named "t1" to the state "off"</span>
        .on(<span class="pl-s1"><span class="pl-pds">"</span>ON<span class="pl-pds">"</span></span>)        <span class="pl-c">// t1 can only be fired when the state machine receives the event "ON"</span>
        .target(<span class="pl-s1"><span class="pl-pds">"</span>on<span class="pl-pds">"</span></span>)    <span class="pl-c">// t1 targets the "on" vertex</span>
      .transition(<span class="pl-s1"><span class="pl-pds">"</span>t3<span class="pl-pds">"</span></span>)  <span class="pl-c">// adds an external transition named "t3" to the state "off"</span>
        .on(<span class="pl-s1"><span class="pl-pds">"</span>KILL<span class="pl-pds">"</span></span>)      <span class="pl-c">// t3 can only be fired when the state machine receives the event "KILL"</span>
        .target(<span class="pl-s1"><span class="pl-pds">"</span>end<span class="pl-pds">"</span></span>);  <span class="pl-c">// t3 targets the "end" vertex</span></pre></div>

<p>And again with the vertex "on":</p>

<div class="highlight highlight-java"><pre>builder
  .region()
    .state(<span class="pl-s1"><span class="pl-pds">"</span>on<span class="pl-pds">"</span></span>)
      .transition(<span class="pl-s1"><span class="pl-pds">"</span>t2<span class="pl-pds">"</span></span>)
        .on(<span class="pl-s1"><span class="pl-pds">"</span>OFF<span class="pl-pds">"</span></span>)
        .target(<span class="pl-s1"><span class="pl-pds">"</span>off<span class="pl-pds">"</span></span>);</pre></div>

<p>And the final state:</p>

<div class="highlight highlight-java"><pre>builder
  .region()
    .finalState(<span class="pl-s1"><span class="pl-pds">"</span>end<span class="pl-pds">"</span></span>);</pre></div>

<p>Now, get a <code>StateMachine</code> instance, choose which <code>StateMachineExecutor</code> you want to use and start it:</p>

<div class="highlight highlight-java"><pre><span class="pl-stj">StateMachine</span> machine <span class="pl-k">=</span> builder<span class="pl-k">.</span>newInstance(); <span class="pl-c">// builds and validates the state machine; the result is cached</span>

<span class="pl-stj">StateMachineExecutor</span> fsm <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">SyncStateMachineExecutor</span>();
fsm<span class="pl-k">.</span>setStateMachine(machine);
fsm<span class="pl-k">.</span>go();</pre></div>

<p>When <code>go</code> is invoked, the state machine auto starts by default and the initial transition is fired.
Therefore, the state machine is now on state "off", waiting for either event "ON" or event "KILL".
You can see so by takign a snapshot of the state machine and looking at its active state configuration:</p>

<div class="highlight highlight-java"><pre><span class="pl-stj">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(fsm<span class="pl-k">.</span>snapshot()<span class="pl-k">.</span>activateStates()); <span class="pl-c">// outputs off</span></pre></div>

<p>Then, use the <code>take</code> method to feed the state machine with events. For instance:</p>

<div class="highlight highlight-java"><pre>fsm<span class="pl-k">.</span>take(<span class="pl-k">new</span> <span class="pl-stj">StringEvent</span>(<span class="pl-s1"><span class="pl-pds">"</span>ON<span class="pl-pds">"</span></span>));
<span class="pl-stj">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(fsm<span class="pl-k">.</span>snapshot()<span class="pl-k">.</span>activateStates()); <span class="pl-c">// outputs on</span>

fsm<span class="pl-k">.</span>take(<span class="pl-k">new</span> <span class="pl-stj">StringEvent</span>(<span class="pl-s1"><span class="pl-pds">"</span>OFF<span class="pl-pds">"</span></span>));
<span class="pl-stj">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(fsm<span class="pl-k">.</span>snapshot()<span class="pl-k">.</span>activateStates()); <span class="pl-c">// outputs off</span>

fsm<span class="pl-k">.</span>take(<span class="pl-k">new</span> <span class="pl-stj">StringEvent</span>(<span class="pl-s1"><span class="pl-pds">"</span>KILL<span class="pl-pds">"</span></span>));
<span class="pl-stj">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(fsm<span class="pl-k">.</span>snapshot()<span class="pl-k">.</span>activateStates()); <span class="pl-c">// outputs end</span></pre></div>

<p>And that's it!</p>

<h2>
<a id="more-tutorials-to-come" class="anchor" href="#more-tutorials-to-come" aria-hidden="true"><span class="octicon octicon-link"></span></a>More tutorials to come...</h2>

<p>Meanwhile, you can the hundred of test state machines this project has</p>
        </section>

        <footer>
          Lympid-core is maintained by <a href="https://github.com/lympid">lympid</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>